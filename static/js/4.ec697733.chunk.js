(this["webpackJsonpbudget-app-v2"]=this["webpackJsonpbudget-app-v2"]||[]).push([[4],{56:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"fetchBudget",(function(){return i})),n.d(r,"fetchBudgetedCategories",(function(){return s})),n.d(r,"addTransaction",(function(){return f}));var a={};n.r(a),n.d(a,"fetchAllCategories",(function(){return l}));var c=n(19),u=n.n(c),o=n(26),i=function(){var t=Object(o.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3005","/budgets/1/?_embed=transactions"));case 2:return e=t.sent,console.log("http://localhost:3005"),t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(o.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3005","/budgets/1/budgetCategories"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(o.a)(u.a.mark((function t(e){var n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetId,r=e.data,t.next=3,fetch("".concat("http://localhost:3005","/budgets/").concat(n,"/transactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(o.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3005","/categories/?_expand=parentCategory"));case 2:return e=t.sent,n=e.json(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.a={budget:r,common:a}},57:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=function(t){var e=Number(t);return new Intl.NumberFormat("pl",{style:"currency",currency:"PLN"}).format(e)},a=function(t){var e=new Date(t);return new Intl.DateTimeFormat("pl").format(e)}},62:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return x}));var r=n(16),a=n(2),c=n(0),u=n.n(c),o=(n(18),n(58)),i=n(30),s=n(4);function f(){var t=Object(s.a)(["\nfont-weight: 700;\ncolor: ","\n"]);return f=function(){return t},t}function l(){var t=Object(s.a)(["\nborder: 1px solid black;\n\n"]);return l=function(){return t},t}function d(){var t=Object(s.a)(["\nborder: 1px solid black;\nmargin-bottom: 1px;\npadding: 10px;\ndisplay: flex;\njustify-content: space-between;\n"]);return d=function(){return t},t}var b=a.default.div(d()),m=a.default.div(l()),p=a.default.div(f(),(function(t){return t.negative?"red":"#00CC00"})),g=n(57);var v=function(t){var e=t.name,n=t.onClick,r=t.categories,a=t.transactions,o=t.amount,i=Object(c.useMemo)((function(){if(o)return null;var t=function(){try{return r.reduce((function(t,e){return t+e.budget}),0)}catch(t){return null}}(),e=a.filter((function(t){return r.find((function(e){return e.categoryId===t.categoryId}))})).reduce((function(t,e){return t+e.amount}),0);return t?t-e:null}),[r,a,o]),s=Object(c.useMemo)((function(){return o||i}),[i,o]);return u.a.createElement(b,{onClick:n},u.a.createElement("span",null,e),u.a.createElement(p,{negative:s<0},Object(g.a)(s)))};var h=function(t){var e=t.name,n=t.item,r=t.transactions.filter((function(t){return t.id===n.id})).reduce((function(t,e){return t+e.amount}),0),a=n.budget-r;return u.a.createElement(m,null,u.a.createElement("span",null,e),u.a.createElement(p,{negative:a<0},Object(g.a)(a)))},j=n(27),O=n(56),y=n(29),C=Object(a.default)("div").withConfig({displayName:"BudgetCategoryList___StyledDiv",componentId:"sc-17bb6g3-0"})(["background-color:lightgray;border-bottom:5px solid white"]),k=Object(a.default)("div").withConfig({displayName:"BudgetCategoryList___StyledDiv2",componentId:"sc-17bb6g3-1"})(["background-color:lightgray;border-top:5px solid white"]);var x=function(){var t=Object(j.c)("budget",O.a.budget.fetchBudget).data,e=Object(j.c)("allCategories",O.a.common.fetchAllCategories).data,n=Object(j.c)("budgetedCategories",O.a.budget.fetchBudgetedCategories).data,a=Object(c.useContext)(y.a.store).dispatch,s=Object(c.useCallback)((function(t){return a({type:"selectParentCategoryId",payload:t})}),[a]),f=Object(c.useMemo)((function(){return Object(o.groupBy)(n,(function(t){return e.find((function(e){return e.id===t.categoryId})).parentCategory.name}))}),[n,e]),l=Object(c.useRef)(null),d=Object(c.useCallback)((function(){s(),l.current()}),[s,l]),b=Object(c.useCallback)((function(){s(null),l.current()}),[s,l]),m=Object(c.useMemo)((function(){return Object.entries(f).map((function(n){var a=Object(r.a)(n,2),c=a[0],o=a[1];return{id:c,Trigger:function(e){var n=e.onClick;return u.a.createElement(v,{name:c,onClick:function(){n(c),s(c)},categories:o,transactions:t.transactions})},children:o.map((function(n){var r=e.find((function(t){return t.id===n.categoryId})).name;return u.a.createElement(h,{key:n.id,name:r,item:n,transactions:t.transactions})}))}}))}),[e,t.transactions,f,s]),p=Object(c.useMemo)((function(){return t.transactions.reduce((function(t,e){return t+e.amount}),0)}),[t.transactions]),g=Object(c.useMemo)((function(){return t.totalAmount-p}),[t.totalAmount,p]),x=Object(c.useMemo)((function(){return n.reduce((function(e,n){var r=t.transactions.filter((function(t){return t.categoryId===n.id})).reduce((function(t,e){return t+e.amount}),0);return e+Math.max(r,n.budget)}),0)}),[n,t.transactions]),w=Object(c.useMemo)((function(){return t.transactions.filter((function(t){return!n.find((function(e){return e.id===t.categoryId}))}))}),[t.transactions,n]),E=Object(c.useMemo)((function(){return w.reduce((function(t,e){return t+e.amount}),0)}),[w]),I=Object(c.useMemo)((function(){return t.totalAmount-E-x}),[t.totalAmount,E,x]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(C,null,u.a.createElement(v,{name:t.name,amount:g,onClick:d})),u.a.createElement(i.a,{items:m,clickRef:l}),u.a.createElement(k,null,u.a.createElement(v,{name:"Other categories",amount:I,onClick:b})))}}}]);
//# sourceMappingURL=4.ec697733.chunk.js.map